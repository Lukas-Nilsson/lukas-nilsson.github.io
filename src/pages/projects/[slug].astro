---
import { getCollection, getEntry } from 'astro:content';
import ContentPage from '../../layouts/ContentPage.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';

export async function getStaticPaths() {
  const projects = await getCollection('public', (entry) => {
    return entry.id.startsWith('Projects/') && 
           !entry.id.includes('index.md') &&
           entry.data.publish === true;
  });

  return projects.map(project => ({
    params: { slug: project.id.replace('Projects/', '').replace('.md', '') },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
const { title, summary } = project.data;
---

<ContentPage title={title} description={summary}>
  <Breadcrumbs crumbs={[
    { label: 'Projects', href: '/projects' },
    { label: title || 'Project' }
  ]} />
  <Content />
</ContentPage>

